(function(e,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(e=typeof globalThis<"u"?globalThis:e||self,i(e["bentools-picker"]={}))})(this,function(e){"use strict";var u=Object.defineProperty;var p=(e,i,r)=>i in e?u(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r;var c=(e,i,r)=>p(e,typeof i!="symbol"?i+"":i,r);class i extends Error{constructor(){super("Cannot pick from an empty list"),this.name="EmptyPickerError"}}function r(g){return typeof g=="object"&&g!==null}const l={shift:!1,errorIfEmpty:!0,defaultWeight:1,weights:void 0};class a{constructor(t,s={}){c(this,"items");c(this,"options");c(this,"weights");this.items=[...t],this.options={...l,...s};const n=t.length>0&&r(t[0]);if(this.weights=n?new WeakMap:new Map,s.weights){if(Array.isArray(s.weights))for(const[h,o]of s.weights)n&&r(h)?this.weights.set(h,o):n||this.weights.set(h,o);else if(!n){const h=s.weights;for(const o of t){const f=String(o);f in h&&this.weights.set(o,h[f])}}}}getWeight(t){return r(t)?this.weights.get(t)??this.options.defaultWeight:this.weights.get(t)??this.options.defaultWeight}setWeight(t,s){return r(t)?this.weights.set(t,s):this.weights.set(t,s),this}calculateTotalWeight(){return this.items.reduce((t,s)=>t+this.getWeight(s),0)}pick(){if(this.items.length===0){if(this.options.errorIfEmpty)throw new i;return}const t=this.calculateTotalWeight();let s=Math.random()*t;for(let h=0;h<this.items.length;h++){const o=this.items[h],f=this.getWeight(o);if(s<=f)return this.options.shift&&this.items.splice(h,1),o;s-=f}const n=this.items[this.items.length-1];return this.options.shift&&this.items.pop(),n}}e.EmptyPickerError=i,e.Picker=a,e.isWeakKeyable=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
